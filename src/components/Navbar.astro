---
import ArtisanalIcon from "./ArtisanalIcon.astro";

const navItems = [
    { name: "Inicio", href: "/", icon: "house" },
    { name: "Misa", href: "/misa", icon: "hands-praying" },
    { name: "Filiales", href: "/filiales", icon: "church" },
    { name: "María", href: "/maria", icon: "heart" },
    { name: "Noticias", href: "/noticias", icon: "newspaper" },
];
---

<header
    class="sticky top-6 z-50 w-[95%] max-w-7xl mx-auto glass-card rounded-3xl border border-gold/20 shadow-glass-hover transition-all duration-500 hover:border-gold/40"
>
    <div class="px-6 sm:px-8">
        <div class="flex justify-between items-center h-24">
            <!-- logo -->
            <a href="/" class="flex items-center space-x-5 group">
                <div class="relative">
                    <div
                        class="w-14 h-14 rounded-2xl bg-gold flex items-center justify-center text-parchment transition-all group-hover:rotate-[360deg] duration-1000 shadow-gold/20 shadow-2xl"
                    >
                        <ArtisanalIcon name="cross" weight="bold" size={30} />
                    </div>
                    <div
                        class="absolute -inset-2 border border-gold/20 rounded-2xl group-hover:scale-110 transition-transform duration-500 pointer-events-none"
                    >
                    </div>
                </div>
                <div class="flex flex-col">
                    <span
                        class="text-2xl md:text-3xl font-display font-bold tracking-tight text-deep-blue group-hover:text-gold-dark transition-colors duration-300"
                        >Peñas Blancas</span
                    >
                    <span
                        class="text-[10px] uppercase tracking-[0.4em] text-deep-blue/40 font-bold"
                        >Comunidad Parroquial</span
                    >
                </div>
            </a>

            <!-- desktop nav -->
            <nav class="hidden lg:flex items-center space-x-2">
                {
                    navItems.map((item) => (
                        <a
                            href={item.href}
                            class="flex items-center space-x-2 text-sm font-bold text-deep-blue/70 hover:text-gold-dark transition-all duration-300 relative group px-4 py-2 rounded-xl hover:bg-gold/5"
                        >
                            <ArtisanalIcon
                                name={item.icon}
                                size={18}
                                class="text-gold transition-all group-hover:scale-110"
                            />
                            <span>{item.name}</span>
                            <span class="absolute -bottom-1 left-1/2 -translate-x-1/2 w-0 h-1 bg-gold rounded-full transition-all duration-300 group-hover:w-8" />
                        </a>
                    ))
                }
            </nav>

            <!-- mobile menu button -->
            <div class="lg:hidden">
                <button
                    id="mobile-menu-button"
                    class="text-gold-dark p-3 rounded-2xl bg-gold/5 hover:bg-gold/10 transition-colors relative h-12 w-12 flex items-center justify-center"
                    aria-label="Abrir menú"
                >
                    <div
                        id="menu-icon-container"
                        class="transition-all duration-300"
                    >
                        <ArtisanalIcon name="list" size={28} />
                    </div>
                    <div
                        id="close-icon-container"
                        class="absolute inset-0 flex items-center justify-center opacity-0 scale-50 transition-all duration-300 pointer-events-none"
                    >
                        <ArtisanalIcon name="x" size={28} />
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- mobile nav -->
    <div
        id="mobile-menu"
        class="hidden lg:hidden bg-parchment/95 backdrop-blur-xl rounded-b-3xl border-t border-gold/10 overflow-hidden animate-sacred-in"
    >
        <div class="px-6 py-8 space-y-2">
            {
                navItems.map((item) => (
                    <a
                        href={item.href}
                        class="flex items-center space-x-5 px-5 py-4 text-lg font-bold text-deep-blue/80 hover:bg-gold/10 hover:text-gold-dark rounded-2xl transition-all"
                    >
                        <ArtisanalIcon
                            name={item.icon}
                            size={24}
                            class="text-gold"
                        />
                        <span>{item.name}</span>
                    </a>
                ))
            }
        </div>
    </div>
</header>

<script>
    const btn = document.getElementById("mobile-menu-button");
    const menu = document.getElementById("mobile-menu");
    const menuIcon = document.getElementById("menu-icon-container");
    const closeIcon = document.getElementById("close-icon-container");

    btn?.addEventListener("click", () => {
        const isOpen = !menu?.classList.contains("hidden");

        menu?.classList.toggle("hidden");

        if (!isOpen) {
            // Opening
            menuIcon?.classList.add("opacity-0", "scale-50");
            closeIcon?.classList.remove("opacity-0", "scale-50");
            closeIcon?.classList.add("opacity-100", "scale-100");
        } else {
            // Closing
            menuIcon?.classList.remove("opacity-0", "scale-50");
            closeIcon?.classList.add("opacity-0", "scale-50");
            closeIcon?.classList.remove("opacity-100", "scale-100");
        }
    });
</script>
